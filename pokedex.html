<!DOCTYPE html>
<html>
    <head>

      <meta charset="utf-8">
      <title>Pokemon</title>
      <!-- CSS files for Pokedex -->
      <link type="text/css" rel="stylesheet" href = "CSS/Poke_stylesheet.css" media = "screen">
      <link type="text/css" rel="stylesheet" href = "CSS/menu.css" media = "screen">
      <link type="text/css" rel="stylesheet" href = "CSS/pokeball.css" media = "screen">

      <!-- JavaScript -->
      <script>
        var getPokemon = function(){
          var req = new XMLHttpRequest();
          req.open("GET", 
          "https://pokeapi.co/api/v2/pokemon/?offset=0&limit=3", true);
          req.onload = function(){
            var data = JSON.parse(this.response);
            var results = data.results;
            var name = [];
            var url = [];
            var max = 3;
            for(var i = 0; i < max; i++){
              var obj = results[i];
              name[i] = obj.name;
              url[i] = obj.url; 
            }
            
            var img = [];
            var j = 0;
            // var req = new XMLHttpRequest();
            req.onreadystatechange = function(){ 
              console.log(2);
              if(req.readyState == 4 && req.status == 200){
                var newData = JSON.parse(req.responseText);
                img[j] = newData.sprites.front_default;
                console.log(3);
                if(j != max){
                  req.open("GET", url[j], true);
                  req.send();
                  console.log(4);
                }
                j++;

                for(var a = max-1; a >= 0; a--){
                  console.log(a+".");
                  document.getElementById("start").insertAdjacentHTML("afterend", "<td>" + name[a] + "</td>" + 
                  "<td> <img style='height: 50px; width: 50px;' src=" + img[a+1] + "></td>"); 
                  console.log(5);
                } 
              }
            };

            req.open("GET", url[j], true);
            req.send();    
            console.log(7);     
                                
          };
          req.send();
          console.log(8);
        }
      </script>

    </head>
    <body onload = "getPokemon()">
      <div id="mainPage"></div>
      <div class="header">
      <ul>
        <a href="index.html"><button class="index"><br><br>Home<hr class="hHr"></button></a>
        <span class="gen">
          <a href="pokedex.html"><button class="pokeball"><br><br>Pok√©dex<hr class="pHr"></button></a>
                <div class="dropdown">
                    <a href="all.html">All</a>
                    <a href="gen1.html">Gen I</a>
                    <a href="gen2.html">Gen II</a>
                    <a href="gen3.html">Gen III</a>
                    <a href="gen4.html">Gen IV</a>
                    <a href="gen5.html">Gen V</a>
                    <a href="gen6.html">Gen VI</a>
                    <a href="gen7.html">Gen VII</a>
                    <a href="gen8.html">Gen VIII</a>
                </div>
        </span>
        <a href="moves.html"><button class="move"><br><br>Moves<hr class="mHr"></button></a>
        <span class="item_list">
          <a href="items.html"><button class="items"><br><br>Items<hr class="iHr"></button></a>
                <div class="dropdown2">
                    <a href="balls.html">Pokeballs</a>
                    <a style="line-height: 40px;" href="battleItems.html">Battle Items</a>
                    <a style="line-height: 40px;" href="generalItems.html">General Items</a>
                    <a href="holdItems.html">Hold Items</a>
                    <a href="medicine.html">Medicine</a>
                    <a href="stones.html">Stones</a>
                    <a href="berries.html">Berries</a>
                    <a href="HM.html">HM</a>
                </div>
        </span>
        <a href="games.html"><button class="game"><br><br>Games<hr class="gHr"></button></a>
      </ul>  
      <hr class="movingLine">
    </div>
    <hr style="border-color: white;">
    
    <!-- Insert Pokemon -->
    <table>
        <thread>
            <br>
            <br>
            <br>
            <tr>
                <th>Pokemon Name</th>
                <th>Image</th>
            </tr>
            <tr id = "start"> 
            </tr>
        </thread>
    </table>

    </body>
</html>
